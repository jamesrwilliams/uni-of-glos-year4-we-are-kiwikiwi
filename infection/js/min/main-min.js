function drawHex(e,t,l){var i=1e-4,s=[[t+1*i,l+0],[t+3*i,l+0],[t+4*i,l+1*i*2.7],[t+3*i,l+2*i*2.7],[t+1*i,l+2*i*2.7],[t+0*i,l+1*i*2.7]];return s}function isNumber(e){return e==parseFloat(e)}function isEven(e){return isNumber(e)&&e%2===0}function isOdd(e){return isNumber(e)&&Math.abs(e)%2===1}function drawFences(e,t,l){var s=10,r=10,o=3e-4,a=27e-5;for(count=0;count<l.setup.height;count++)if(isEven(count))for(i=0;i<l.setup.width;i++){var y=0*i,n=i*-54e-5;polygons.push(map.drawPolygon({paths:drawHex(1,e-o*count,t-n),strokeColor:l.grid.strokeColour,strokeOpacity:l.grid.strokeWeight,strokeWeight:l.grid.strokeOpacity,fillColor:l.style.fillColor,fillOpacity:l.style.fillOpactiy}))}else if(isOdd(count))for(i=0;i<l.setup.width-1;i++){var y=0*i,n=i*-54e-5;polygons.push(map.drawPolygon({paths:drawHex(1,e-o*count,t+a-n),strokeColor:l.grid.strokeColour,strokeOpacity:l.grid.strokeWeight,strokeWeight:l.grid.strokeOpacity,fillColor:l.style.fillColor,fillOpacity:l.style.fillOpactiy}))}}function refreshMap(){$.ajax({type:"get",url:"http://www.jamesrwilliams.co.uk/hybrid/api.php?request=fetch_game",dataType:"json",success:function(e){initialise(JSON.parse(e))},error:function(){console.log("Error")}})}function initialise(e){var t=e;map=new GMaps({zoom:18,div:"#map-canvas",lat:51.88718,lng:-2.088669,disableDefaultUI:!0});var l=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{hue:"#ff0000"},{lightness:"100"}]},{featureType:"administrative.neighborhood",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{lightness:"7"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#48d1af"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#66b0ff"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.arterial",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{lightness:"100"},{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{lightness:"100"},{visibility:"on"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"transit.station.bus",elementType:"labels.text.fill",stylers:[{hue:"#ff0000"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#4aceae"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{lightness:"100"}]}];for(map.setOptions({styles:l}),drawFences(51.888094,-2.091802,t),i=0;i<polygons.length;i++)"1"===t.grid[i]?polygons[i].setOptions({fillColor:t.style.vampire,fillOpacity:t.style.active.fillOpacity}):"2"==t.grid[i]?polygons[i].setOptions({fillColor:t.style.werewolf,fillOpacity:t.style.active.fillOpacity}):"3"==t.grid[i]?polygons[i].setOptions({fillColor:t.style.ghost,fillOpacity:t.style.active.fillOpacity}):"4"==t.grid[i]?polygons[i].setOptions({fillColor:t.style.zombie,fillOpacity:t.style.active.fillOpacity}):polygons[i].setOptions({fillColor:"#FFFFFF",fillOpacity:.1})}var map,i,output,test_marker,polygons=[];